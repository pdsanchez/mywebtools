<ui:composition xmlns="http://www.w3.org/1999/xhtml"  
                xmlns:h="http://java.sun.com/jsf/html"  
                xmlns:f="http://java.sun.com/jsf/core"  
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/WEB-INF/templates/alumno-template.xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
  <ui:define name="content">

    <div class="container">
      <div class="row">
        <div class="col-md-12">  

          <div class="panel panel-default">
            <div class="panel-body">
              <h:form id="f1" styleClass="form-horizontal">
                <h:outputLabel value="Cursos disponibles " styleClass="col-sm-3 control-label"/>
                <div class="col-sm-4">
                  <h:selectOneMenu styleClass="form-control" value="#{testMBean.idMatriculaSeleccionada}">
                    <f:selectItem itemLabel="SELECCIONAR CURSO" itemValue="0"/>
                    <f:selectItems var="m" value="#{testMBean.matriculasDeCursosActivos}" itemLabel="#{m.curso.nombre}" itemValue="#{m.idMatricula}"/>
                    <f:ajax render="f1 panel f2" event="change"/>
                  </h:selectOneMenu>
                </div>
                <div class="col-sm-2">
                  <h:commandButton value="Realizar Test" action="#{testMBean.mostrarPreguntas()}" styleClass="btn btn-primary" disabled="#{not testMBean.pendiente}">
                    <f:ajax render="panel f2"/>
                  </h:commandButton>
                </div>
                <div class="col-sm-3">
                  <p class="text-warning"><h:outputText value="Test realizado. Nota: #{testMBean.nota}" rendered="#{not testMBean.pendiente and testMBean.idMatriculaSeleccionada > 0}"/></p>
                </div>
              </h:form>
            </div>
          </div>

          <h:panelGroup id="panel" layout="block">
            <h:form id="f2" styleClass="form-horizontal" rendered="#{testMBean.runTest}">
              <div class="col-md-11">
                <ol>
                  <c:forEach var="p" items="#{testMBean.preguntas}">
                    <li class="bg-success" style="width:100%">#{p.texto}</li>
                    <blockquote>
                      <h:selectOneRadio layout="pageDirection" value="#{p.acertada}">
                        <f:selectItems var="rp" value="#{p.respuestas}" itemLabel="#{rp.texto}" itemValue="#{rp.correcta}"/>
                      </h:selectOneRadio>
                    </blockquote>
                  </c:forEach>
                </ol>
              </div>
              <div class="col-md-2 col-md-offset-5">
                <h:commandButton value="Obtener Nota" action="#{testMBean.obtenerNota()}" styleClass="btn btn-primary"/>
              </div>
            </h:form>
          </h:panelGroup>

        </div>
      </div>
    </div>

  </ui:define>
</ui:composition>     

